{"ast":null,"code":"import _classCallCheck from\"D:/white-board/ui/whiteboard-collab/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/white-board/ui/whiteboard-collab/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/white-board/ui/whiteboard-collab/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/white-board/ui/whiteboard-collab/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import io from'socket.io-client';import'./style.css';import{jsx as _jsx}from\"react/jsx-runtime\";var Board=/*#__PURE__*/function(_React$Component){_inherits(Board,_React$Component);var _super=_createSuper(Board);function Board(props){var _this;_classCallCheck(this,Board);_this=_super.call(this,props);_this.socket=io.connect(\"http://localhost:3000\");_this.isDrawing=false;_this.socket.on(\"canvas-data\",function(data){var root=this;var interval=setInterval(function(){if(root.isDrawing)return;root.isDrawing=true;clearInterval(interval);var image=new Image();var canvas=document.querySelector('#board');var ctx=canvas.getContext('2d');image.onload=function(){ctx.drawImage(image,0,0);root.isDrawing=false;};image.src=data;},200);});return _this;}_createClass(Board,[{key:\"componentDidMount\",value:function componentDidMount(){this.drawOnCanvas();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newProps){this.ctx.strokeStyle=newProps.color;this.ctx.lineWidth=newProps.size;}},{key:\"drawOnCanvas\",value:function drawOnCanvas(){var canvas=document.querySelector('#board');this.ctx=canvas.getContext('2d');var ctx=this.ctx;var sketch=document.querySelector('#sketch');var sketch_style=getComputedStyle(sketch);canvas.width=parseInt(sketch_style.getPropertyValue('width'));canvas.height=parseInt(sketch_style.getPropertyValue('height'));var mouse={x:0,y:0};var last_mouse={x:0,y:0};/* Mouse Capturing Work */canvas.addEventListener('mousemove',function(e){last_mouse.x=mouse.x;last_mouse.y=mouse.y;mouse.x=e.pageX-this.offsetLeft;mouse.y=e.pageY-this.offsetTop;},false);/* Drawing on Paint App */ctx.lineWidth=this.props.size;ctx.lineJoin='round';ctx.lineCap='round';ctx.strokeStyle=this.props.color;canvas.addEventListener('mousedown',function(e){canvas.addEventListener('mousemove',onPaint,false);},false);canvas.addEventListener('mouseup',function(){canvas.removeEventListener('mousemove',onPaint,false);},false);var root=this;var onPaint=function onPaint(){ctx.beginPath();ctx.moveTo(last_mouse.x,last_mouse.y);ctx.lineTo(mouse.x,mouse.y);ctx.closePath();ctx.stroke();if(root.timeout!==undefined)clearTimeout(root.timeout);root.timeout=setTimeout(function(){var base64ImageData=canvas.toDataURL(\"image/png\");root.socket.emit(\"canvas-data\",base64ImageData);},1000);};}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{class:\"sketch\",id:\"sketch\",children:/*#__PURE__*/_jsx(\"canvas\",{className:\"board\",id:\"board\"})});}}]);return Board;}(React.Component);export default Board;","map":{"version":3,"names":["React","io","jsx","_jsx","Board","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","socket","connect","isDrawing","on","data","root","interval","setInterval","clearInterval","image","Image","canvas","document","querySelector","ctx","getContext","onload","drawImage","src","_createClass","key","value","componentDidMount","drawOnCanvas","componentWillReceiveProps","newProps","strokeStyle","color","lineWidth","size","sketch","sketch_style","getComputedStyle","width","parseInt","getPropertyValue","height","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","lineJoin","lineCap","onPaint","removeEventListener","beginPath","moveTo","lineTo","closePath","stroke","timeout","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL","emit","render","class","id","children","className","Component"],"sources":["D:/white-board/ui/whiteboard-collab/src/component/board/board.jsx"],"sourcesContent":["import React from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nimport './style.css';\r\n\r\nclass Board extends React.Component {\r\n\r\n    timeout;\r\n    socket = io.connect(\"http://localhost:3000\");\r\n\r\n    ctx;\r\n    isDrawing = false;\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.socket.on(\"canvas-data\", function(data){\r\n\r\n            var root = this;\r\n            var interval = setInterval(function(){\r\n                if(root.isDrawing) return;\r\n                root.isDrawing = true;\r\n                clearInterval(interval);\r\n                var image = new Image();\r\n                var canvas = document.querySelector('#board');\r\n                var ctx = canvas.getContext('2d');\r\n                image.onload = function() {\r\n                    ctx.drawImage(image, 0, 0);\r\n\r\n                    root.isDrawing = false;\r\n                };\r\n                image.src = data;\r\n            }, 200)\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.drawOnCanvas();\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        this.ctx.strokeStyle = newProps.color;\r\n        this.ctx.lineWidth = newProps.size;\r\n    }\r\n\r\n    drawOnCanvas() {\r\n        var canvas = document.querySelector('#board');\r\n        this.ctx = canvas.getContext('2d');\r\n        var ctx = this.ctx;\r\n\r\n        var sketch = document.querySelector('#sketch');\r\n        var sketch_style = getComputedStyle(sketch);\r\n        canvas.width = parseInt(sketch_style.getPropertyValue('width'));\r\n        canvas.height = parseInt(sketch_style.getPropertyValue('height'));\r\n\r\n        var mouse = {x: 0, y: 0};\r\n        var last_mouse = {x: 0, y: 0};\r\n\r\n        /* Mouse Capturing Work */\r\n        canvas.addEventListener('mousemove', function(e) {\r\n            last_mouse.x = mouse.x;\r\n            last_mouse.y = mouse.y;\r\n\r\n            mouse.x = e.pageX - this.offsetLeft;\r\n            mouse.y = e.pageY - this.offsetTop;\r\n        }, false);\r\n\r\n\r\n        /* Drawing on Paint App */\r\n        ctx.lineWidth = this.props.size;\r\n        ctx.lineJoin = 'round';\r\n        ctx.lineCap = 'round';\r\n        ctx.strokeStyle = this.props.color;\r\n\r\n        canvas.addEventListener('mousedown', function(e) {\r\n            canvas.addEventListener('mousemove', onPaint, false);\r\n        }, false);\r\n\r\n        canvas.addEventListener('mouseup', function() {\r\n            canvas.removeEventListener('mousemove', onPaint, false);\r\n        }, false);\r\n\r\n        var root = this;\r\n        var onPaint = function() {\r\n            ctx.beginPath();\r\n            ctx.moveTo(last_mouse.x, last_mouse.y);\r\n            ctx.lineTo(mouse.x, mouse.y);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n\r\n            if(root.timeout !== undefined) clearTimeout(root.timeout);\r\n            root.timeout = setTimeout(function(){\r\n                var base64ImageData = canvas.toDataURL(\"image/png\");\r\n                root.socket.emit(\"canvas-data\", base64ImageData);\r\n            }, 1000)\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"sketch\" id=\"sketch\">\r\n                <canvas className=\"board\" id=\"board\"></canvas>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Board"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}