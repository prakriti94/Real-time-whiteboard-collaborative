{"ast":null,"code":"var _jsxFileName = \"D:\\\\white-board\\\\ui\\\\whiteboard-collab\\\\src\\\\component\\\\board\\\\board.jsx\";\nimport React from 'react';\nimport io from 'socket.io-client';\nimport './style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Board extends React.Component {\n  constructor(props) {\n    super(props);\n    this.socket = io.connect(\"http://localhost:3000\");\n    this.isDrawing = false;\n    this.socket.on(\"canvas-data\", function (data) {\n      var root = this;\n      var interval = setInterval(function () {\n        if (root.isDrawing) return;\n        root.isDrawing = true;\n        clearInterval(interval);\n        var image = new Image();\n        var canvas = document.querySelector('#board');\n        var ctx = canvas.getContext('2d');\n        image.onload = function () {\n          ctx.drawImage(image, 0, 0);\n          root.isDrawing = false;\n        };\n        image.src = data;\n      }, 200);\n    });\n  }\n  componentDidMount() {\n    this.drawOnCanvas();\n  }\n  componentWillReceiveProps(newProps) {\n    this.ctx.strokeStyle = newProps.color;\n    this.ctx.lineWidth = newProps.size;\n  }\n  drawOnCanvas() {\n    var canvas = document.querySelector('#board');\n    this.ctx = canvas.getContext('2d');\n    var ctx = this.ctx;\n    var sketch = document.querySelector('#sketch');\n    var sketch_style = getComputedStyle(sketch);\n    canvas.width = parseInt(sketch_style.getPropertyValue('width'));\n    canvas.height = parseInt(sketch_style.getPropertyValue('height'));\n    var mouse = {\n      x: 0,\n      y: 0\n    };\n    var last_mouse = {\n      x: 0,\n      y: 0\n    };\n\n    /* Mouse Capturing Work */\n    canvas.addEventListener('mousemove', function (e) {\n      last_mouse.x = mouse.x;\n      last_mouse.y = mouse.y;\n      mouse.x = e.pageX - this.offsetLeft;\n      mouse.y = e.pageY - this.offsetTop;\n    }, false);\n\n    /* Drawing on Paint App */\n    ctx.lineWidth = this.props.size;\n    ctx.lineJoin = 'round';\n    ctx.lineCap = 'round';\n    ctx.strokeStyle = this.props.color;\n    canvas.addEventListener('mousedown', function (e) {\n      canvas.addEventListener('mousemove', onPaint, false);\n    }, false);\n    canvas.addEventListener('mouseup', function () {\n      canvas.removeEventListener('mousemove', onPaint, false);\n    }, false);\n    var root = this;\n    var onPaint = function () {\n      ctx.beginPath();\n      ctx.moveTo(last_mouse.x, last_mouse.y);\n      ctx.lineTo(mouse.x, mouse.y);\n      ctx.closePath();\n      ctx.stroke();\n      if (root.timeout !== undefined) clearTimeout(root.timeout);\n      root.timeout = setTimeout(function () {\n        var base64ImageData = canvas.toDataURL(\"image/png\");\n        root.socket.emit(\"canvas-data\", base64ImageData);\n      }, 1000);\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"sketch\",\n      id: \"sketch\",\n      children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n        className: \"board\",\n        id: \"board\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this);\n  }\n}\nexport default Board;","map":{"version":3,"names":["React","io","jsxDEV","_jsxDEV","Board","Component","constructor","props","socket","connect","isDrawing","on","data","root","interval","setInterval","clearInterval","image","Image","canvas","document","querySelector","ctx","getContext","onload","drawImage","src","componentDidMount","drawOnCanvas","componentWillReceiveProps","newProps","strokeStyle","color","lineWidth","size","sketch","sketch_style","getComputedStyle","width","parseInt","getPropertyValue","height","mouse","x","y","last_mouse","addEventListener","e","pageX","offsetLeft","pageY","offsetTop","lineJoin","lineCap","onPaint","removeEventListener","beginPath","moveTo","lineTo","closePath","stroke","timeout","undefined","clearTimeout","setTimeout","base64ImageData","toDataURL","emit","render","class","id","children","className","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["D:/white-board/ui/whiteboard-collab/src/component/board/board.jsx"],"sourcesContent":["import React from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nimport './style.css';\r\n\r\nclass Board extends React.Component {\r\n\r\n    timeout;\r\n    socket = io.connect(\"http://localhost:3000\");\r\n\r\n    ctx;\r\n    isDrawing = false;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.socket.on(\"canvas-data\", function(data){\r\n\r\n            var root = this;\r\n            var interval = setInterval(function(){\r\n                if(root.isDrawing) return;\r\n                root.isDrawing = true;\r\n                clearInterval(interval);\r\n                var image = new Image();\r\n                var canvas = document.querySelector('#board');\r\n                var ctx = canvas.getContext('2d');\r\n                image.onload = function() {\r\n                    ctx.drawImage(image, 0, 0);\r\n\r\n                    root.isDrawing = false;\r\n                };\r\n                image.src = data;\r\n            }, 200)\r\n        })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.drawOnCanvas();\r\n    }\r\n\r\n    componentWillReceiveProps(newProps) {\r\n        this.ctx.strokeStyle = newProps.color;\r\n        this.ctx.lineWidth = newProps.size;\r\n    }\r\n\r\n    drawOnCanvas() {\r\n        var canvas = document.querySelector('#board');\r\n        this.ctx = canvas.getContext('2d');\r\n        var ctx = this.ctx;\r\n\r\n        var sketch = document.querySelector('#sketch');\r\n        var sketch_style = getComputedStyle(sketch);\r\n        canvas.width = parseInt(sketch_style.getPropertyValue('width'));\r\n        canvas.height = parseInt(sketch_style.getPropertyValue('height'));\r\n\r\n        var mouse = {x: 0, y: 0};\r\n        var last_mouse = {x: 0, y: 0};\r\n\r\n        /* Mouse Capturing Work */\r\n        canvas.addEventListener('mousemove', function(e) {\r\n            last_mouse.x = mouse.x;\r\n            last_mouse.y = mouse.y;\r\n\r\n            mouse.x = e.pageX - this.offsetLeft;\r\n            mouse.y = e.pageY - this.offsetTop;\r\n        }, false);\r\n\r\n\r\n        /* Drawing on Paint App */\r\n        ctx.lineWidth = this.props.size;\r\n        ctx.lineJoin = 'round';\r\n        ctx.lineCap = 'round';\r\n        ctx.strokeStyle = this.props.color;\r\n\r\n        canvas.addEventListener('mousedown', function(e) {\r\n            canvas.addEventListener('mousemove', onPaint, false);\r\n        }, false);\r\n\r\n        canvas.addEventListener('mouseup', function() {\r\n            canvas.removeEventListener('mousemove', onPaint, false);\r\n        }, false);\r\n\r\n        var root = this;\r\n        var onPaint = function() {\r\n            ctx.beginPath();\r\n            ctx.moveTo(last_mouse.x, last_mouse.y);\r\n            ctx.lineTo(mouse.x, mouse.y);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n\r\n            if(root.timeout !== undefined) clearTimeout(root.timeout);\r\n            root.timeout = setTimeout(function(){\r\n                var base64ImageData = canvas.toDataURL(\"image/png\");\r\n                root.socket.emit(\"canvas-data\", base64ImageData);\r\n            }, 1000)\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"sketch\" id=\"sketch\">\r\n                <canvas className=\"board\" id=\"board\"></canvas>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Board"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}